import{B as cn,o as fn,s as z,i as hn}from"./BaseChart-3c34daa3.js";import{w as gn,c as R,a as dn}from"./array-95b0a04c.js";import{o as pn,c as mn,a as yn,b as xn}from"./app-2cc4ed27.js";const sn=Math.abs,M=Math.atan2,S=Math.cos,vn=Math.max,rn=Math.min,E=Math.sin,j=Math.sqrt,P=1e-12,F=Math.PI,X=F/2,U=2*F;function An(r){return r>1?0:r<-1?F:Math.acos(r)}function un(r){return r>=1?X:r<=-1?-X:Math.asin(r)}function Mn(r){return r.innerRadius}function wn(r){return r.outerRadius}function Rn(r){return r.startAngle}function Tn(r){return r.endAngle}function Cn(r){return r&&r.padAngle}function Pn(r,s,g,y,x,v,f,t){var h=g-r,o=y-s,n=f-x,l=t-v,e=l*h-n*o;if(!(e*e<P))return e=(n*(s-v)-l*(r-x))/e,[r+e*h,s+e*o]}function Q(r,s,g,y,x,v,f){var t=r-g,h=s-y,o=(f?v:-v)/j(t*t+h*h),n=o*h,l=-o*t,e=r+n,i=s+l,d=g+n,p=y+l,B=(e+d)/2,c=(i+p)/2,w=d-e,A=p-i,m=w*w+A*A,T=x-v,C=e*p-d*i,V=(A<0?-1:1)*j(vn(0,T*T*m-C*C)),q=(C*A-w*V)/m,D=(-C*w-A*V)/m,I=(C*A+w*V)/m,k=(-C*w+A*V)/m,b=q-B,a=D-c,u=I-B,O=k-c;return b*b+a*a>u*u+O*O&&(q=I,D=k),{cx:q,cy:D,x01:-n,y01:-l,x11:q*(x/T-1),y11:D*(x/T-1)}}function ln(){var r=Mn,s=wn,g=R(0),y=null,x=Rn,v=Tn,f=Cn,t=null,h=gn(o);function o(){var n,l,e=+r.apply(this,arguments),i=+s.apply(this,arguments),d=x.apply(this,arguments)-X,p=v.apply(this,arguments)-X,B=sn(p-d),c=p>d;if(t||(t=n=h()),i<e&&(l=i,i=e,e=l),!(i>P))t.moveTo(0,0);else if(B>U-P)t.moveTo(i*S(d),i*E(d)),t.arc(0,0,i,d,p,!c),e>P&&(t.moveTo(e*S(p),e*E(p)),t.arc(0,0,e,p,d,c));else{var w=d,A=p,m=d,T=p,C=B,V=B,q=f.apply(this,arguments)/2,D=q>P&&(y?+y.apply(this,arguments):j(e*e+i*i)),I=rn(sn(i-e)/2,+g.apply(this,arguments)),k=I,b=I,a,u;if(D>P){var O=un(D/e*E(q)),G=un(D/i*E(q));(C-=O*2)>P?(O*=c?1:-1,m+=O,T-=O):(C=0,m=T=(d+p)/2),(V-=G*2)>P?(G*=c?1:-1,w+=G,A-=G):(V=0,w=A=(d+p)/2)}var W=i*S(w),$=i*E(w),H=e*S(T),J=e*E(T);if(I>P){var K=i*S(A),L=i*E(A),Y=e*S(m),Z=e*E(m),N;if(B<F)if(N=Pn(W,$,Y,Z,K,L,H,J)){var _=W-N[0],nn=$-N[1],tn=K-N[0],en=L-N[1],an=1/E(An((_*tn+nn*en)/(j(_*_+nn*nn)*j(tn*tn+en*en)))/2),on=j(N[0]*N[0]+N[1]*N[1]);k=rn(I,(e-on)/(an-1)),b=rn(I,(i-on)/(an+1))}else k=b=0}V>P?b>P?(a=Q(Y,Z,W,$,i,b,c),u=Q(K,L,H,J,i,b,c),t.moveTo(a.cx+a.x01,a.cy+a.y01),b<I?t.arc(a.cx,a.cy,b,M(a.y01,a.x01),M(u.y01,u.x01),!c):(t.arc(a.cx,a.cy,b,M(a.y01,a.x01),M(a.y11,a.x11),!c),t.arc(0,0,i,M(a.cy+a.y11,a.cx+a.x11),M(u.cy+u.y11,u.cx+u.x11),!c),t.arc(u.cx,u.cy,b,M(u.y11,u.x11),M(u.y01,u.x01),!c))):(t.moveTo(W,$),t.arc(0,0,i,w,A,!c)):t.moveTo(W,$),!(e>P)||!(C>P)?t.lineTo(H,J):k>P?(a=Q(H,J,K,L,e,-k,c),u=Q(W,$,Y,Z,e,-k,c),t.lineTo(a.cx+a.x01,a.cy+a.y01),k<I?t.arc(a.cx,a.cy,k,M(a.y01,a.x01),M(u.y01,u.x01),!c):(t.arc(a.cx,a.cy,k,M(a.y01,a.x01),M(a.y11,a.x11),!c),t.arc(0,0,e,M(a.cy+a.y11,a.cx+a.x11),M(u.cy+u.y11,u.cx+u.x11),c),t.arc(u.cx,u.cy,k,M(u.y11,u.x11),M(u.y01,u.x01),!c))):t.arc(0,0,e,T,m,c)}if(t.closePath(),n)return t=null,n+""||null}return o.centroid=function(){var n=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2,l=(+x.apply(this,arguments)+ +v.apply(this,arguments))/2-F/2;return[S(l)*n,E(l)*n]},o.innerRadius=function(n){return arguments.length?(r=typeof n=="function"?n:R(+n),o):r},o.outerRadius=function(n){return arguments.length?(s=typeof n=="function"?n:R(+n),o):s},o.cornerRadius=function(n){return arguments.length?(g=typeof n=="function"?n:R(+n),o):g},o.padRadius=function(n){return arguments.length?(y=n==null?null:typeof n=="function"?n:R(+n),o):y},o.startAngle=function(n){return arguments.length?(x=typeof n=="function"?n:R(+n),o):x},o.endAngle=function(n){return arguments.length?(v=typeof n=="function"?n:R(+n),o):v},o.padAngle=function(n){return arguments.length?(f=typeof n=="function"?n:R(+n),o):f},o.context=function(n){return arguments.length?(t=n??null,o):t},o}function kn(r,s){return s<r?-1:s>r?1:s>=r?0:NaN}function bn(r){return r}function Bn(){var r=bn,s=kn,g=null,y=R(0),x=R(U),v=R(0);function f(t){var h,o=(t=dn(t)).length,n,l,e=0,i=new Array(o),d=new Array(o),p=+y.apply(this,arguments),B=Math.min(U,Math.max(-U,x.apply(this,arguments)-p)),c,w=Math.min(Math.abs(B)/o,v.apply(this,arguments)),A=w*(B<0?-1:1),m;for(h=0;h<o;++h)(m=d[i[h]=h]=+r(t[h],h,t))>0&&(e+=m);for(s!=null?i.sort(function(T,C){return s(d[T],d[C])}):g!=null&&i.sort(function(T,C){return g(t[T],t[C])}),h=0,l=e?(B-o*A)/e:0;h<o;++h,p=c)n=i[h],m=d[n],c=p+(m>0?m*l:0)+A,d[n]={data:t[n],index:h,value:m,startAngle:p,endAngle:c,padAngle:w};return d}return f.value=function(t){return arguments.length?(r=typeof t=="function"?t:R(+t),f):r},f.sortValues=function(t){return arguments.length?(s=t,g=null,f):s},f.sort=function(t){return arguments.length?(g=t,s=null,f):g},f.startAngle=function(t){return arguments.length?(y=typeof t=="function"?t:R(+t),f):y},f.endAngle=function(t){return arguments.length?(x=typeof t=="function"?t:R(+t),f):x},f.padAngle=function(t){return arguments.length?(v=typeof t=="function"?t:R(+t),f):v},f}class In extends cn{colors(s,g){return Array.isArray(s)?this._colors=s:(this._fromColor=s,this._toColor=g),this}build(){const s=this.options.margin.top+this.options.margin.bottom+this.options.margin.left+this.options.margin.right,g=Math.min(this.width,this.height)/2-s,y=()=>{if(this._colors)return this._colors;const n=hn(this._fromColor??"red",this._toColor??"blue");return this._data.map((l,e)=>n(e/this._data.length))},x=fn().domain(this._data).range(y()),f=Bn().value(function(n){return n.value})(this._data);let t=this.svg.append("g").attr("transform","translate("+this.width/2+","+this.height/2+")").selectAll(null).data(f).enter().append("path").attr("class","arc");this.options.animation.enabled&&(t=t.attr("d",ln().innerRadius(0).outerRadius(0).cornerRadius(50)).transition().duration(this.options.animation.duration).call(h,()=>{console.log("end"),this.svg.selectAll("path.arc").on("mouseover",(n,l)=>{z(n.currentTarget).transition().duration(500).attr("transform",o(l,6)),z(n.currentTarget).select("path").transition().duration(500).attr("stroke","rgba(100, 100, 100, 0.2)").attr("stroke-width",4),z(".card-back text").text(l.data.type)}).on("mouseout",(n,l)=>{z(n.currentTarget).transition().duration(500).attr("transform","translate(0, 0)"),z(n.currentTarget).select("path").transition().duration(500).attr("stroke","white").attr("stroke-width",1)})}));function h(n,l){if(typeof l!="function")throw new Error("Wrong callback in endall");n.size()===0&&l();let e;n.on("end",function(){e&&clearTimeout(e),e=setTimeout(()=>{l()},300)})}t.attr("d",ln().innerRadius(0).outerRadius(g)).attr("fill",function(n,l){return x(n.data)}).attr("stroke",this.options.strokeColor??"#323232").style("stroke-width","1px").style("opacity",.7);function o(n,l=4){const e=n.startAngle+(n.endAngle-n.startAngle)/2;return`translate(${-l*Math.cos(e+Math.PI/2)}, ${-l*Math.sin(e+Math.PI/2)})`}return this}}const En={id:"pie-chart-demo",class:"w-full h-full flex flex-col"},Nn=xn("div",{id:"pie-chart",class:"w-1/2 h-4/6"},null,-1),Vn=[Nn],Sn={name:"PieChart",setup(r){return pn(()=>{const s=[{name:"Apple",value:10},{name:"Banana",value:20},{name:"Orange",value:30},{name:"Mango",value:40},{name:"Pineapple",value:50},{name:"Strawberry",value:60},{name:"Watermelon",value:70}],g=new In(document.getElementById("pie-chart"));try{g.data(s).colors("brown","yellow").build()}catch(y){console.log(y)}}),(s,g)=>(yn(),mn("div",En,Vn))}};export{Sn as default};
