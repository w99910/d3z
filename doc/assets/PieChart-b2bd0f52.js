import{B as ln,o as cn,i as hn,s as z}from"./BaseChart-63519ea0.js";import{w as fn,c as w,a as gn}from"./array-95b0a04c.js";import{o as dn,c as pn,a as mn,b as yn}from"./app-87afaaf0.js";const on=Math.abs,M=Math.atan2,$=Math.cos,An=Math.max,an=Math.min,E=Math.sin,W=Math.sqrt,k=1e-12,F=Math.PI,X=F/2,U=2*F;function vn(a){return a>1?0:a<-1?F:Math.acos(a)}function un(a){return a>=1?X:a<=-1?-X:Math.asin(a)}function xn(a){return a.innerRadius}function Mn(a){return a.outerRadius}function Tn(a){return a.startAngle}function wn(a){return a.endAngle}function Rn(a){return a&&a.padAngle}function Pn(a,s,f,g,p,A,c,n){var h=f-a,e=g-s,t=c-p,v=n-A,i=v*h-t*e;if(!(i*i<k))return i=(t*(s-A)-v*(a-p))/i,[a+i*h,s+i*e]}function Q(a,s,f,g,p,A,c){var n=a-f,h=s-g,e=(c?A:-A)/W(n*n+h*h),t=e*h,v=-e*n,i=a+t,o=s+v,d=f+t,m=g+v,I=(i+d)/2,l=(o+m)/2,T=d-i,x=m-o,y=T*T+x*x,R=p-A,P=i*m-d*o,V=(x<0?-1:1)*W(An(0,R*R*y-P*P)),q=(P*x-T*V)/y,O=(-P*T-x*V)/y,C=(P*x+T*V)/y,B=(-P*T+x*V)/y,b=q-I,r=O-l,u=C-I,S=B-l;return b*b+r*r>u*u+S*S&&(q=C,O=B),{cx:q,cy:O,x01:-t,y01:-v,x11:q*(p/R-1),y11:O*(p/R-1)}}function kn(){var a=xn,s=Mn,f=w(0),g=null,p=Tn,A=wn,c=Rn,n=null,h=fn(e);function e(){var t,v,i=+a.apply(this,arguments),o=+s.apply(this,arguments),d=p.apply(this,arguments)-X,m=A.apply(this,arguments)-X,I=on(m-d),l=m>d;if(n||(n=t=h()),o<i&&(v=o,o=i,i=v),!(o>k))n.moveTo(0,0);else if(I>U-k)n.moveTo(o*$(d),o*E(d)),n.arc(0,0,o,d,m,!l),i>k&&(n.moveTo(i*$(m),i*E(m)),n.arc(0,0,i,m,d,l));else{var T=d,x=m,y=d,R=m,P=I,V=I,q=c.apply(this,arguments)/2,O=q>k&&(g?+g.apply(this,arguments):W(i*i+o*o)),C=an(on(o-i)/2,+f.apply(this,arguments)),B=C,b=C,r,u;if(O>k){var S=un(O/i*E(q)),G=un(O/o*E(q));(P-=S*2)>k?(S*=l?1:-1,y+=S,R-=S):(P=0,y=R=(d+m)/2),(V-=G*2)>k?(G*=l?1:-1,T+=G,x-=G):(V=0,T=x=(d+m)/2)}var j=o*$(T),D=o*E(T),H=i*$(R),J=i*E(R);if(C>k){var K=o*$(x),L=o*E(x),Y=i*$(y),Z=i*E(y),N;if(I<F)if(N=Pn(j,D,Y,Z,K,L,H,J)){var _=j-N[0],nn=D-N[1],tn=K-N[0],en=L-N[1],rn=1/E(vn((_*tn+nn*en)/(W(_*_+nn*nn)*W(tn*tn+en*en)))/2),sn=W(N[0]*N[0]+N[1]*N[1]);B=an(C,(i-sn)/(rn-1)),b=an(C,(o-sn)/(rn+1))}else B=b=0}V>k?b>k?(r=Q(Y,Z,j,D,o,b,l),u=Q(K,L,H,J,o,b,l),n.moveTo(r.cx+r.x01,r.cy+r.y01),b<C?n.arc(r.cx,r.cy,b,M(r.y01,r.x01),M(u.y01,u.x01),!l):(n.arc(r.cx,r.cy,b,M(r.y01,r.x01),M(r.y11,r.x11),!l),n.arc(0,0,o,M(r.cy+r.y11,r.cx+r.x11),M(u.cy+u.y11,u.cx+u.x11),!l),n.arc(u.cx,u.cy,b,M(u.y11,u.x11),M(u.y01,u.x01),!l))):(n.moveTo(j,D),n.arc(0,0,o,T,x,!l)):n.moveTo(j,D),!(i>k)||!(P>k)?n.lineTo(H,J):B>k?(r=Q(H,J,K,L,i,-B,l),u=Q(j,D,Y,Z,i,-B,l),n.lineTo(r.cx+r.x01,r.cy+r.y01),B<C?n.arc(r.cx,r.cy,B,M(r.y01,r.x01),M(u.y01,u.x01),!l):(n.arc(r.cx,r.cy,B,M(r.y01,r.x01),M(r.y11,r.x11),!l),n.arc(0,0,i,M(r.cy+r.y11,r.cx+r.x11),M(u.cy+u.y11,u.cx+u.x11),l),n.arc(u.cx,u.cy,B,M(u.y11,u.x11),M(u.y01,u.x01),!l))):n.arc(0,0,i,R,y,l)}if(n.closePath(),t)return n=null,t+""||null}return e.centroid=function(){var t=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2,v=(+p.apply(this,arguments)+ +A.apply(this,arguments))/2-F/2;return[$(v)*t,E(v)*t]},e.innerRadius=function(t){return arguments.length?(a=typeof t=="function"?t:w(+t),e):a},e.outerRadius=function(t){return arguments.length?(s=typeof t=="function"?t:w(+t),e):s},e.cornerRadius=function(t){return arguments.length?(f=typeof t=="function"?t:w(+t),e):f},e.padRadius=function(t){return arguments.length?(g=t==null?null:typeof t=="function"?t:w(+t),e):g},e.startAngle=function(t){return arguments.length?(p=typeof t=="function"?t:w(+t),e):p},e.endAngle=function(t){return arguments.length?(A=typeof t=="function"?t:w(+t),e):A},e.padAngle=function(t){return arguments.length?(c=typeof t=="function"?t:w(+t),e):c},e.context=function(t){return arguments.length?(n=t??null,e):n},e}function Bn(a,s){return s<a?-1:s>a?1:s>=a?0:NaN}function bn(a){return a}function In(){var a=bn,s=Bn,f=null,g=w(0),p=w(U),A=w(0);function c(n){var h,e=(n=gn(n)).length,t,v,i=0,o=new Array(e),d=new Array(e),m=+g.apply(this,arguments),I=Math.min(U,Math.max(-U,p.apply(this,arguments)-m)),l,T=Math.min(Math.abs(I)/e,A.apply(this,arguments)),x=T*(I<0?-1:1),y;for(h=0;h<e;++h)(y=d[o[h]=h]=+a(n[h],h,n))>0&&(i+=y);for(s!=null?o.sort(function(R,P){return s(d[R],d[P])}):f!=null&&o.sort(function(R,P){return f(n[R],n[P])}),h=0,v=i?(I-e*x)/i:0;h<e;++h,m=l)t=o[h],y=d[t],l=m+(y>0?y*v:0)+x,d[t]={data:n[t],index:h,value:y,startAngle:m,endAngle:l,padAngle:T};return d}return c.value=function(n){return arguments.length?(a=typeof n=="function"?n:w(+n),c):a},c.sortValues=function(n){return arguments.length?(s=n,f=null,c):s},c.sort=function(n){return arguments.length?(f=n,s=null,c):f},c.startAngle=function(n){return arguments.length?(g=typeof n=="function"?n:w(+n),c):g},c.endAngle=function(n){return arguments.length?(p=typeof n=="function"?n:w(+n),c):p},c.padAngle=function(n){return arguments.length?(A=typeof n=="function"?n:w(+n),c):A},c}class Cn extends ln{calcTranslate(s,f=4){const g=s.startAngle+(s.endAngle-s.startAngle)/2;return`translate(${-f*Math.cos(g+Math.PI/2)}, ${-f*Math.sin(g+Math.PI/2)})`}build(){const s=this.options.margin.top+this.options.margin.bottom+this.options.margin.left+this.options.margin.right,f=Math.min(this.width,this.height)/2-s,g=cn().domain(this._data).range(this.getColors()),p=In().value(function(e){return e.value});let A=p(this._data),c=this.svg.append("g").attr("transform","translate("+this.width/2+","+this.height/2+")").selectAll("path").data(A).enter().append("path").attr("class","arc").style("fill",(e,t)=>g[t]),n=hn(p.startAngle()(null),p.endAngle()(null)),h=kn().innerRadius(0).outerRadius(f);return this.options.animation.enabled&&c.transition().duration(this.options.animation.duration).attrTween("d",e=>{let t=e.endAngle;return v=>{let i=n(v);return i<e.startAngle?"":(e.endAngle=Math.min(i,t),h(e))}}),c.attr("d",h).attr("fill",function(e){return g(e.data.value)}),this.onEndAnimation(()=>{this.svg.selectAll("path.arc").on("mouseover",(e,t)=>{z(e.currentTarget).transition().duration(500).attr("transform",this.calcTranslate(t,6)),z(e.currentTarget).select("path").transition().duration(500).attr("stroke","rgba(100, 100, 100, 0.2)").attr("stroke-width",4),z(".card-back text").text(t.data.type)}).on("mouseout",(e,t)=>{z(e.currentTarget).transition().duration(500).attr("transform","translate(0, 0)"),z(e.currentTarget).select("path").transition().duration(500).attr("stroke","white").attr("stroke-width",1)})}),this}}const En={id:"pie-chart-demo",class:"w-full h-full flex flex-col"},Nn=yn("div",{id:"pie-chart",class:"w-1/2 h-4/6"},null,-1),Vn=[Nn],$n={name:"PieChart",setup(a){return dn(()=>{const s=[{name:"Apple",value:10},{name:"Banana",value:20},{name:"Orange",value:30},{name:"Mango",value:40},{name:"Pineapple",value:50},{name:"Strawberry",value:60},{name:"Watermelon",value:70}],f=new Cn(document.getElementById("pie-chart"));try{f.data(s).build()}catch(g){console.log(g)}}),(s,f)=>(mn(),pn("div",En,Vn))}};export{$n as default};
