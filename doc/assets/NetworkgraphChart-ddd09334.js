import{s as P,d as H,t as et,B as nt}from"./BaseChart-3c34daa3.js";import{o as rt,c as it,a as at,b as ot}from"./app-b477446e.js";function ut(t){let e;for(;e=t.sourceEvent;)t=e;return t}function F(t,e){if(t=ut(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const st={passive:!1},D={capture:!0,passive:!1};function Y(t){t.stopImmediatePropagation()}function z(t){t.preventDefault(),t.stopImmediatePropagation()}function lt(t){var e=t.document.documentElement,n=P(t).on("dragstart.drag",z,D);"onselectstart"in e?n.on("selectstart.drag",z,D):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ct(t,e){var n=t.document.documentElement,i=P(t).on("dragstart.drag",null);e&&(i.on("click.drag",z,D),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const I=t=>()=>t;function V(t,{sourceEvent:e,subject:n,target:i,identifier:a,active:o,x:l,y:u,dx:d,dy:f,dispatch:v}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:v}})}V.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ft(t){return!t.ctrlKey&&!t.button}function ht(){return this.parentNode}function gt(t,e){return e??{x:t.x,y:t.y}}function dt(){return navigator.maxTouchPoints||"ontouchstart"in this}function yt(){var t=ft,e=ht,n=gt,i=dt,a={},o=H("start","drag","end"),l=0,u,d,f,v,x=0;function y(r){r.on("mousedown.drag",g).filter(i).on("touchstart.drag",s).on("touchmove.drag",h,st).on("touchend.drag touchcancel.drag",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(r,_){if(!(v||!t.call(this,r,_))){var b=w(this,e.call(this,r,_),r,_,"mouse");b&&(P(r.view).on("mousemove.drag",m,D).on("mouseup.drag",c,D),lt(r.view),Y(r),f=!1,u=r.clientX,d=r.clientY,b("start",r))}}function m(r){if(z(r),!f){var _=r.clientX-u,b=r.clientY-d;f=_*_+b*b>x}a.mouse("drag",r)}function c(r){P(r.view).on("mousemove.drag mouseup.drag",null),ct(r.view,f),z(r),a.mouse("end",r)}function s(r,_){if(t.call(this,r,_)){var b=r.changedTouches,N=e.call(this,r,_),M=b.length,A,T;for(A=0;A<M;++A)(T=w(this,N,r,_,b[A].identifier,b[A]))&&(Y(r),T("start",r,b[A]))}}function h(r){var _=r.changedTouches,b=_.length,N,M;for(N=0;N<b;++N)(M=a[_[N].identifier])&&(z(r),M("drag",r,_[N]))}function p(r){var _=r.changedTouches,b=_.length,N,M;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),N=0;N<b;++N)(M=a[_[N].identifier])&&(Y(r),M("end",r,_[N]))}function w(r,_,b,N,M,A){var T=o.copy(),E=F(A||b,_),O,R,B;if((B=n.call(r,new V("beforestart",{sourceEvent:b,target:y,identifier:M,active:l,x:E[0],y:E[1],dx:0,dy:0,dispatch:T}),N))!=null)return O=B.x-E[0]||0,R=B.y-E[1]||0,function Z(G,U,tt){var q=E,X;switch(G){case"start":a[M]=Z,X=l++;break;case"end":delete a[M],--l;case"drag":E=F(tt||U,_),X=l;break}T.call(G,r,new V(G,{sourceEvent:U,subject:B,target:y,identifier:M,active:X,x:E[0]+O,y:E[1]+R,dx:E[0]-q[0],dy:E[1]-q[1],dispatch:T}),N)}}return y.filter=function(r){return arguments.length?(t=typeof r=="function"?r:I(!!r),y):t},y.container=function(r){return arguments.length?(e=typeof r=="function"?r:I(r),y):e},y.subject=function(r){return arguments.length?(n=typeof r=="function"?r:I(r),y):n},y.touchable=function(r){return arguments.length?(i=typeof r=="function"?r:I(!!r),y):i},y.on=function(){var r=o.on.apply(o,arguments);return r===o?y:r},y.clickDistance=function(r){return arguments.length?(x=(r=+r)*r,y):Math.sqrt(x)},y}function xt(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function a(){var o,l=n.length,u,d=0,f=0;for(o=0;o<l;++o)u=n[o],d+=u.x,f+=u.y;for(d=(d/l-t)*i,f=(f/l-e)*i,o=0;o<l;++o)u=n[o],u.x-=d,u.y-=f}return a.initialize=function(o){n=o},a.x=function(o){return arguments.length?(t=+o,a):t},a.y=function(o){return arguments.length?(e=+o,a):e},a.strength=function(o){return arguments.length?(i=+o,a):i},a}function pt(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return J(this.cover(e,n),e,n,t)}function J(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var a,o=t._root,l={data:i},u=t._x0,d=t._y0,f=t._x1,v=t._y1,x,y,g,m,c,s,h,p;if(!o)return t._root=l,t;for(;o.length;)if((c=e>=(x=(u+f)/2))?u=x:f=x,(s=n>=(y=(d+v)/2))?d=y:v=y,a=o,!(o=o[h=s<<1|c]))return a[h]=l,t;if(g=+t._x.call(null,o.data),m=+t._y.call(null,o.data),e===g&&n===m)return l.next=o,a?a[h]=l:t._root=l,t;do a=a?a[h]=new Array(4):t._root=new Array(4),(c=e>=(x=(u+f)/2))?u=x:f=x,(s=n>=(y=(d+v)/2))?d=y:v=y;while((h=s<<1|c)===(p=(m>=y)<<1|g>=x));return a[p]=o,a[h]=l,t}function vt(t){var e,n,i=t.length,a,o,l=new Array(i),u=new Array(i),d=1/0,f=1/0,v=-1/0,x=-1/0;for(n=0;n<i;++n)isNaN(a=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(l[n]=a,u[n]=o,a<d&&(d=a),a>v&&(v=a),o<f&&(f=o),o>x&&(x=o));if(d>v||f>x)return this;for(this.cover(d,f).cover(v,x),n=0;n<i;++n)J(this,l[n],u[n],t[n]);return this}function _t(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,a=this._x1,o=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var l=a-n||1,u=this._root,d,f;n>t||t>=a||i>e||e>=o;)switch(f=(e<i)<<1|t<n,d=new Array(4),d[f]=u,u=d,l*=2,f){case 0:a=n+l,o=i+l;break;case 1:n=a-l,o=i+l;break;case 2:a=n+l,i=o-l;break;case 3:n=a-l,i=o-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=a,this._y1=o,this}function mt(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function wt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function k(t,e,n,i,a){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=a}function bt(t,e,n){var i,a=this._x0,o=this._y0,l,u,d,f,v=this._x1,x=this._y1,y=[],g=this._root,m,c;for(g&&y.push(new k(g,a,o,v,x)),n==null?n=1/0:(a=t-n,o=e-n,v=t+n,x=e+n,n*=n);m=y.pop();)if(!(!(g=m.node)||(l=m.x0)>v||(u=m.y0)>x||(d=m.x1)<a||(f=m.y1)<o))if(g.length){var s=(l+d)/2,h=(u+f)/2;y.push(new k(g[3],s,h,d,f),new k(g[2],l,h,s,f),new k(g[1],s,u,d,h),new k(g[0],l,u,s,h)),(c=(e>=h)<<1|t>=s)&&(m=y[y.length-1],y[y.length-1]=y[y.length-1-c],y[y.length-1-c]=m)}else{var p=t-+this._x.call(null,g.data),w=e-+this._y.call(null,g.data),r=p*p+w*w;if(r<n){var _=Math.sqrt(n=r);a=t-_,o=e-_,v=t+_,x=e+_,i=g.data}}return i}function Nt(t){if(isNaN(v=+this._x.call(null,t))||isNaN(x=+this._y.call(null,t)))return this;var e,n=this._root,i,a,o,l=this._x0,u=this._y0,d=this._x1,f=this._y1,v,x,y,g,m,c,s,h;if(!n)return this;if(n.length)for(;;){if((m=v>=(y=(l+d)/2))?l=y:d=y,(c=x>=(g=(u+f)/2))?u=g:f=g,e=n,!(n=n[s=c<<1|m]))return this;if(!n.length)break;(e[s+1&3]||e[s+2&3]||e[s+3&3])&&(i=e,h=s)}for(;n.data!==t;)if(a=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,a?(o?a.next=o:delete a.next,this):e?(o?e[s]=o:delete e[s],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[h]=n:this._root=n),this):(this._root=o,this)}function Mt(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function At(){return this._root}function kt(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function jt(t){var e=[],n,i=this._root,a,o,l,u,d;for(i&&e.push(new k(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,o=n.x0,l=n.y0,u=n.x1,d=n.y1)&&i.length){var f=(o+u)/2,v=(l+d)/2;(a=i[3])&&e.push(new k(a,f,v,u,d)),(a=i[2])&&e.push(new k(a,o,v,f,d)),(a=i[1])&&e.push(new k(a,f,l,u,v)),(a=i[0])&&e.push(new k(a,o,l,f,v))}return this}function Tt(t){var e=[],n=[],i;for(this._root&&e.push(new k(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var a=i.node;if(a.length){var o,l=i.x0,u=i.y0,d=i.x1,f=i.y1,v=(l+d)/2,x=(u+f)/2;(o=a[0])&&e.push(new k(o,l,u,v,x)),(o=a[1])&&e.push(new k(o,v,u,d,x)),(o=a[2])&&e.push(new k(o,l,x,v,f)),(o=a[3])&&e.push(new k(o,v,x,d,f))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Et(t){return t[0]}function St(t){return arguments.length?(this._x=t,this):this._x}function zt(t){return t[1]}function Ct(t){return arguments.length?(this._y=t,this):this._y}function W(t,e,n){var i=new L(e??Et,n??zt,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function L(t,e,n,i,a,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=a,this._y1=o,this._root=void 0}function Q(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var j=W.prototype=L.prototype;j.copy=function(){var t=new L(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=Q(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var a=0;a<4;++a)(i=e.source[a])&&(i.length?n.push({source:i,target:e.target[a]=new Array(4)}):e.target[a]=Q(i));return t};j.add=pt;j.addAll=vt;j.cover=_t;j.data=mt;j.extent=wt;j.find=bt;j.remove=Nt;j.removeAll=Mt;j.root=At;j.size=kt;j.visit=jt;j.visitAfter=Tt;j.x=St;j.y=Ct;function C(t){return function(){return t}}function S(t){return(t()-.5)*1e-6}function Dt(t){return t.index}function K(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Bt(t){var e=Dt,n=x,i,a=C(30),o,l,u,d,f,v=1;t==null&&(t=[]);function x(s){return 1/Math.min(u[s.source.index],u[s.target.index])}function y(s){for(var h=0,p=t.length;h<v;++h)for(var w=0,r,_,b,N,M,A,T;w<p;++w)r=t[w],_=r.source,b=r.target,N=b.x+b.vx-_.x-_.vx||S(f),M=b.y+b.vy-_.y-_.vy||S(f),A=Math.sqrt(N*N+M*M),A=(A-o[w])/A*s*i[w],N*=A,M*=A,b.vx-=N*(T=d[w]),b.vy-=M*T,_.vx+=N*(T=1-T),_.vy+=M*T}function g(){if(l){var s,h=l.length,p=t.length,w=new Map(l.map((_,b)=>[e(_,b,l),_])),r;for(s=0,u=new Array(h);s<p;++s)r=t[s],r.index=s,typeof r.source!="object"&&(r.source=K(w,r.source)),typeof r.target!="object"&&(r.target=K(w,r.target)),u[r.source.index]=(u[r.source.index]||0)+1,u[r.target.index]=(u[r.target.index]||0)+1;for(s=0,d=new Array(p);s<p;++s)r=t[s],d[s]=u[r.source.index]/(u[r.source.index]+u[r.target.index]);i=new Array(p),m(),o=new Array(p),c()}}function m(){if(l)for(var s=0,h=t.length;s<h;++s)i[s]=+n(t[s],s,t)}function c(){if(l)for(var s=0,h=t.length;s<h;++s)o[s]=+a(t[s],s,t)}return y.initialize=function(s,h){l=s,f=h,g()},y.links=function(s){return arguments.length?(t=s,g(),y):t},y.id=function(s){return arguments.length?(e=s,y):e},y.iterations=function(s){return arguments.length?(v=+s,y):v},y.strength=function(s){return arguments.length?(n=typeof s=="function"?s:C(+s),m(),y):n},y.distance=function(s){return arguments.length?(a=typeof s=="function"?s:C(+s),c(),y):a},y}const It=1664525,Pt=1013904223,$=4294967296;function Gt(){let t=1;return()=>(t=(It*t+Pt)%$)/$}function Xt(t){return t.x}function Yt(t){return t.y}var Vt=10,Lt=Math.PI*(3-Math.sqrt(5));function Ot(t){var e,n=1,i=.001,a=1-Math.pow(i,1/300),o=0,l=.6,u=new Map,d=et(x),f=H("tick","end"),v=Gt();t==null&&(t=[]);function x(){y(),f.call("tick",e),n<i&&(d.stop(),f.call("end",e))}function y(c){var s,h=t.length,p;c===void 0&&(c=1);for(var w=0;w<c;++w)for(n+=(o-n)*a,u.forEach(function(r){r(n)}),s=0;s<h;++s)p=t[s],p.fx==null?p.x+=p.vx*=l:(p.x=p.fx,p.vx=0),p.fy==null?p.y+=p.vy*=l:(p.y=p.fy,p.vy=0);return e}function g(){for(var c=0,s=t.length,h;c<s;++c){if(h=t[c],h.index=c,h.fx!=null&&(h.x=h.fx),h.fy!=null&&(h.y=h.fy),isNaN(h.x)||isNaN(h.y)){var p=Vt*Math.sqrt(.5+c),w=c*Lt;h.x=p*Math.cos(w),h.y=p*Math.sin(w)}(isNaN(h.vx)||isNaN(h.vy))&&(h.vx=h.vy=0)}}function m(c){return c.initialize&&c.initialize(t,v),c}return g(),e={tick:y,restart:function(){return d.restart(x),e},stop:function(){return d.stop(),e},nodes:function(c){return arguments.length?(t=c,g(),u.forEach(m),e):t},alpha:function(c){return arguments.length?(n=+c,e):n},alphaMin:function(c){return arguments.length?(i=+c,e):i},alphaDecay:function(c){return arguments.length?(a=+c,e):+a},alphaTarget:function(c){return arguments.length?(o=+c,e):o},velocityDecay:function(c){return arguments.length?(l=1-c,e):1-l},randomSource:function(c){return arguments.length?(v=c,u.forEach(m),e):v},force:function(c,s){return arguments.length>1?(s==null?u.delete(c):u.set(c,m(s)),e):u.get(c)},find:function(c,s,h){var p=0,w=t.length,r,_,b,N,M;for(h==null?h=1/0:h*=h,p=0;p<w;++p)N=t[p],r=c-N.x,_=s-N.y,b=r*r+_*_,b<h&&(M=N,h=b);return M},on:function(c,s){return arguments.length>1?(f.on(c,s),e):f.on(c)}}}function Rt(){var t,e,n,i,a=C(-30),o,l=1,u=1/0,d=.81;function f(g){var m,c=t.length,s=W(t,Xt,Yt).visitAfter(x);for(i=g,m=0;m<c;++m)e=t[m],s.visit(y)}function v(){if(t){var g,m=t.length,c;for(o=new Array(m),g=0;g<m;++g)c=t[g],o[c.index]=+a(c,g,t)}}function x(g){var m=0,c,s,h=0,p,w,r;if(g.length){for(p=w=r=0;r<4;++r)(c=g[r])&&(s=Math.abs(c.value))&&(m+=c.value,h+=s,p+=s*c.x,w+=s*c.y);g.x=p/h,g.y=w/h}else{c=g,c.x=c.data.x,c.y=c.data.y;do m+=o[c.data.index];while(c=c.next)}g.value=m}function y(g,m,c,s){if(!g.value)return!0;var h=g.x-e.x,p=g.y-e.y,w=s-m,r=h*h+p*p;if(w*w/d<r)return r<u&&(h===0&&(h=S(n),r+=h*h),p===0&&(p=S(n),r+=p*p),r<l&&(r=Math.sqrt(l*r)),e.vx+=h*g.value*i/r,e.vy+=p*g.value*i/r),!0;if(g.length||r>=u)return;(g.data!==e||g.next)&&(h===0&&(h=S(n),r+=h*h),p===0&&(p=S(n),r+=p*p),r<l&&(r=Math.sqrt(l*r)));do g.data!==e&&(w=o[g.data.index]*i/r,e.vx+=h*w,e.vy+=p*w);while(g=g.next)}return f.initialize=function(g,m){t=g,n=m,v()},f.strength=function(g){return arguments.length?(a=typeof g=="function"?g:C(+g),v(),f):a},f.distanceMin=function(g){return arguments.length?(l=g*g,f):Math.sqrt(l)},f.distanceMax=function(g){return arguments.length?(u=g*g,f):Math.sqrt(u)},f.theta=function(g){return arguments.length?(d=g*g,f):Math.sqrt(d)},f}class Ut extends nt{data(e){return this._data=e,this}build(){let e={nodes:[],links:[]};if(Array.isArray(this._data)){let u=[];const d=f=>{u.filter(x=>x.id===f).length===0&&u.push({id:f})};for(let f=0;f<this._data.length;f++)if(Array.isArray(this._data[f])&&this._data[f].length===2){let v=this._data[f][0],x=this._data[f][1];d(v),d(x)}}else this._data.nodes&&(e.nodes=this._data.nodes),this._data.links&&(e.links=this._data.links);const n=Ot(e.nodes).force("link",Bt().id(function(u){return u.id}).links(e.links)).force("charge",Rt().distanceMax(100).strength(-100)).force("center",xt(this.width/2,this.height/2)).on("tick",o),i=this.svg.selectAll("line").data(e.links).enter().append("line").style("stroke","#aaa"),a=this.svg.selectAll("circle").data(e.nodes).enter().append("circle").attr("r",8).style("fill",this.options.fillColor??"#72aaff").call(l(n));function o(){i.attr("x1",function(u){return u.source.x}).attr("y1",function(u){return u.source.y}).attr("x2",function(u){return u.target.x}).attr("y2",function(u){return u.target.y}),a.attr("cx",function(u){return u.x}).attr("cy",function(u){return u.y})}function l(u){function d(x){x.active||u.alphaTarget(.3).restart(),x.subject.fx=x.subject.x,x.subject.fy=x.subject.y}function f(x){x.subject.fx=x.x,x.subject.fy=x.y}function v(x){x.active||u.alphaTarget(0),x.subject.fx=null,x.subject.fy=null}return yt().on("start",d).on("drag",f).on("end",v)}return this}}const qt={id:"networkgraph-chart-demo",class:"w-full h-full flex flex-col"},Ft=ot("div",{id:"networkgraph-chart",class:"w-1/2 h-4/6"},null,-1),Qt=[Ft],Ht={name:"NetworkgraphChart",setup(t){return rt(()=>{setTimeout(()=>{let e={nodes:[],links:[]},n=[],i=40;for(let o=0;o<i;o++){let l=Math.floor(Math.random()*i),u=Math.floor(Math.random()*i);n.indexOf(l)===-1&&(e.nodes.push({id:l,name:Math.random()}),n.push(l)),n.indexOf(u)===-1&&(e.nodes.push({id:u,name:Math.random()}),n.push(u)),e.links.push({source:l,target:u})}new Ut(document.getElementById("networkgraph-chart")).data(e).margin({top:0,bottom:0,left:0,right:0}).build()},300)}),(e,n)=>(at(),it("div",qt,Qt))}};export{Ht as default};
